function loadLDisounts(){$("#dp-spinner").removeClass("visually-hidden"),$($("#slDiscounts").find(".variable-amount")).empty(),$.ajax({url:"/sessionservices/promotions.php?q=lpromotions&iid=<?php echo $integration->Id ?>",dataType:"json",type:"GET",success:function(response){let discounts=response.data.VARIABLE_AMOUNT;discounts&&discounts.length>0&&(discounts.forEach(d=>{$($("#slDiscounts").find(".variable-amount")).append(`<option value="${d.id}">${d.name}</option>`),"Online Rabat"===d.name&&$("#osc-new").attr("disabled","true")}),""!==discountLoyveresId&&$("#slDiscounts").val(discountLoyveresId)),$("#dp-spinner").addClass("visually-hidden")},error:function(x,e){$("#dp-spinner").addClass("visually-hidden")}})}function saveLDisounts(){$("#dp-spinner").removeClass("visually-hidden");let seletedVal=$("#slDiscounts").val(),seletedTxt=$("#slDiscounts option:selected").text();"0"===seletedVal&&(seletedVal=null);var settings={url:"/sessionservices/promotions.php?q=lpromotions",method:"POST",data:JSON.stringify({integrationId:parseInt("<?php echo $integration->Id ?>"),gfMenuId:parseInt("<?php echo $gfMenu->menu_id ?>"),discountId:seletedVal,discountName:seletedTxt}),success:function(response){console.log(response),$("#dp-spinner").addClass("visually-hidden"),discountLoyveresId=response.loyverse_id,loadLDisounts(),showAlert("Discount Saved Successfully")},error:function(x,e){console.log(e),console.log(x),$("#dp-spinner").addClass("visually-hidden"),showAlert("Discount Not Saved!",!0)}};$.ajax(settings)}$(document).on("change","#slDiscounts",(function(){})),$(document).ready((function(){loadLDisounts()}));