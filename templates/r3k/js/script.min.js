var ActiveOrderIds=[];function PrintElem(id){var mywindow=window.open(rootpath+"/kds/order.php?id="+id,"PRINT","width=50px");return mywindow.document.close(),mywindow.focus(),setTimeout(()=>{mywindow.print(),mywindow.close()},"1000"),!0}function changeTimeZone(date,timeZone,culture="da-DK"){return"string"==typeof date?new Date(new Date(date).toLocaleString(culture,{timeZone:timeZone})):new Date(date.toLocaleString(culture,{timeZone:timeZone}))}function firstLetterCapitalize(_string){return _string.charAt(0).toUpperCase()+_string.slice(1)}function updateTime(){const CopenhagenDate=(new Date).toLocaleString("da-DK",{timeZone:"Europe/Copenhagen",dateStyle:"full"}),CopenhagenTime=(new Date).toLocaleString("da-DK",{timeZone:"Europe/Copenhagen",timeStyle:"long"});$("#time").html(firstLetterCapitalize(CopenhagenDate)+"<br/>"+CopenhagenTime)}function myFunction(){var now=new Date,later=new Date;later.setMinutes(now.getMinutes()+10),$("input[name='OrderDate']").each((function(){var oDate=new Date($(this).val());now>oDate?$($(this).parent()).toggleClass("bg-danger text-white"):later>oDate&&$($(this).parent()).toggleClass("bg-warning")})),$.getJSON("../api/nyorders").then(r=>{let toRemove=ActiveOrderIds.filter(x=>!r.includes(x)),toAdd=r.filter(x=>!ActiveOrderIds.includes(x));toRemove&&toRemove.length>0&&toRemove.forEach(x=>{$("#accordion_"+x).remove()}),toAdd&&toAdd.length>0&&toAdd.forEach(x=>{$.get("create-card.php?id="+x,(function(resp){$("#orderCards").append(resp)})),playSound()}),ActiveOrderIds=r})}$((function(){setInterval(updateTime,200)}));